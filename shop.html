<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
    />
    <title>MEARTH</title>
  </head>

  <body>
    <div class="main">
      <div class="free-shipping-for">
        <p class="free-p">Free Shipping for all Order of $99</p>
      </div>
      <div class="header">
        <!-- <div class="frame-child"></div> -->
        <div class="logo">
          <img class="frame-item" alt="" src="./public/ellipse-1@2x.png" />
          <b class="mearth">MEARTH</b>
        </div>

        <div class="center">
          <div class="search">
            <input
              class="product-search"
              type="search..."
              placeholder="search..."
            />
            <button class="search-icon">
              <img src="./public/search.svg" alt="" />
            </button>
          </div>
          <div class="menu">
            <div class="home" onclick="loadPage('index.html', this)">Home</div>
            <div class="shop selected" onclick="loadPage('shop.html', this)">
              Shop
            </div>
            <div class="about-us" onclick="loadPage('about.html', this)">
              About Us
            </div>
          </div>
        </div>
        <div class="last">
          <div class="signin">
            <div class="sign-in">SIGN IN / SIGN UP</div>
          </div>
          <div class="cart">
            <img class="emoji-white-heart" alt="" src="./public/heart.svg" />
            <div>
              <div class="cart-count">0</div>
              <img
                class="icon-shopping-cart"
                alt=""
                src="./public/-icon-shopping-cart@2x.png"
              />
            </div>
          </div>
        </div>
      </div>
      <div>
        <img class="room" alt="modern room" src="./public/room.svg" />
      </div>
      <div class="service">
        <div class="dqr">
          <div class="delivery">
            <img class="rectangle-icon" alt="" src="./public/scooter.svg" />
            <div class="content">
              <div class="free-home-delivery">Free Home Delivery</div>
              <p class="for-all-product">
                Free home delivery for all product over $100
              </p>
            </div>
          </div>

          <div class="quality">
            <img class="rectangle-icon" alt="" src="./public/quality.svg" />
            <div class="content">
              <div class="quality-product">Quality Product</div>
              <p class="for-all-product">
                We ounture our productquality all times
              </p>
            </div>
          </div>
          <div class="return">
            <img class="rectangle-icon" alt="" src="./public/return.svg" />
            <div class="content">
              <div class="day-return">5 Day Return</div>
              <p class="for-all-product">
                Our product return policy is very simple & easy
              </p>
            </div>
          </div>
        </div>
      </div>
      <div>
        <h1 class="several-product">Several Product</h1>
        <div id="several-product"></div>
      </div>
      <div class="cart-pop" style="display: none">
        <button class="checkout-btn" onclick="checkout()">Checkout</button>
        <div class="cart-popup" style="display: none">
          <!-- Cart items will be displayed here -->
        </div>
      </div>
      <div class="footer">
        <div class="signmeup">
          <div class="signuplink">
            <input
              class="email-address"
              type="sign me up"
              placeholder="Email Adrress..."
            />
            <button onclick="sigunUp(this)">Sign Me Up</button>
          </div>
        </div>
        <div class="social-media">
          <img src="./public/insta.svg" alt="insta" class="insta" />
          <img src="./public/fb.svg" alt="fb" class="fb" />
          <img src="./public/twit.svg" alt="twit" class="twit" />
        </div>
        <div class="hsn">
          <div class="address">
            <span>Come Say Helllo !</span>
            <p>Jl. Tungturunan Tugu Kuda Kosong No. 007 Des. Hegarmanah</p>
          </div>
          <div class="shop-category">
            <span>Shop</span>
            <ul class="home-shop-contact">
              <li>
                <a href="" target="_blank" rel="noopener noreferrer">Fashion</a>
              </li>
              <li>
                <a href="" target="_blank" rel="noopener noreferrer">Bag</a>
              </li>
              <li>
                <a href="" target="_blank" rel="noopener noreferrer">Shoes</a>
              </li>
              <li>
                <a href="" target="_blank" rel="noopener noreferrer"
                  >Accessories</a
                >
              </li>
            </ul>
          </div>
          <div class="navigate">
            <span>Navigate</span>
            <ul class="home-shop-contact">
              <li onclick="loadPage('index.html', this)">Home</li>
              <li onclick="loadPage('shop.html', this)">Shop</li>
              <li onclick="loadPage('about.html', this)">About us</li>
            </ul>
          </div>
        </div>
        <div class="div6">
          <span>(+62) 863 0407 1872</span>
        </div>
        <div class="contact">
          <button class="contact-button">
            <a
              href="https://wa.me/+6286304071872"
              target="_blank"
              rel="noopener noreferrer"
              ><img alt="conatct" src="./public/send.svg"
            /></a>
          </button>
        </div>
      </div>
    </div>

    <script src="./shop.js"></script>
    <script src="./load.js"></script>
    <script>
      // Add event listener to the "ADD TO CART" buttons
      function addEventListenersToCartButtons() {
        const addToCartButtons = document.querySelectorAll(".add-cart");
        let totalPrice = 0;
        let totalProducts = 0;
        const cartPop = document.querySelector(".cart-pop");
        addToCartButtons.forEach((button) => {
          button.addEventListener("click", async () => {
            // Increment the cart count
            const cartCount = document.querySelector(".cart-count");
            cartCount.textContent = parseInt(cartCount.textContent) + 1;

            // Add the item to the cart popup
            const productElement = button.parentElement.parentElement; // Get the closest product element
            const productName =
              productElement.querySelector(".product-name").textContent;
            const productPrice = parseFloat(
              productElement
                .querySelector(".discount-price")
                .textContent.split("$")[1]
            );

            const cartItem = document.createElement("div");
            const productElementClone = productElement.cloneNode(true);
            productElementClone.querySelector(".add-cart").remove();
            productElementClone.querySelector(".like-image").remove();

            // Append the cloned product element to the cart item
            cartItem.appendChild(productElementClone);

            // Update total price and product count
            totalPrice += productPrice;
            totalProducts++;

            // Display totals in the cart popup
            let totalsElement = document.querySelector(".cart-popup .totals"); // Get existing totals element
            const cartPopup = document.querySelector(".cart-popup");
            if (!totalsElement) {
              // Create it if it doesn't exist
              totalsElement = document.createElement("div");
              totalsElement.classList.add("totals");
              cartPopup.appendChild(totalsElement);
            }
            totalsElement.textContent = `Total Products: ${totalProducts} | Total Price: $${totalPrice.toFixed(
              2
            )}`;

            // Append the cart item to the cart popup
            cartPopup.appendChild(cartItem);
            // Show the cart popup
            // cartPopup.style.display = 'block';
          });
          addQuantityButtonsToCartItems();
        });

        // Add event listener to the "icon-shopping-cart" to show the cart popup
        const cartIcon = document.querySelector(".icon-shopping-cart");
        cartIcon.addEventListener("click", () => {
          const cartPop = document.querySelector(".cart-pop");
          const cartPopup = document.querySelector(".cart-popup");
          cartPop.style.display = "block";
          cartPopup.style.display = "flex";
          cartPopup.style.flexWrap = "wrap";
        });

        // Add event listener to the "checkout" button
        const likeButtons = document.querySelectorAll(".like-image");
        likeButtons.forEach((likeButton) => {
          let isLiked = false; // Track the button's state
          // Add event listener to the like button
          likeButton.addEventListener("click", function () {
            isLiked = !isLiked; // Toggle the state
            console.log(isLiked);
            if (isLiked) {
              likeButton.innerHTML = `<svg width="23" height="32" viewBox="0 0 23 32" fill="red" xmlns="http://www.w3.org/2000/svg">
<path d="M21.7609 9.74613C21.7609 5.31958 19.3767 1.7312 16.4356 1.7312C14.4106 1.7312 12.6499 3.43267 11.7493 5.93731C10.8488 3.43267 9.08809 1.7312 7.06308 1.7312C4.12199 1.7312 1.73779 5.31958 1.73779 9.74613C1.73779 11.6504 2.18098 13.3972 2.918 14.7723L2.91617 14.7744L11.7493 31.2516L20.5824 14.7745L20.5806 14.7723C21.3177 13.3972 21.7609 11.6504 21.7609 9.74613Z" stroke="#212020" stroke-width="0" stroke-miterlimit="10" stroke-linejoin="round"/>
</svg>`;
            } else {
              likeButton.innerHTML = `<svg width="23" height="32" viewBox="0 0 23 32" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M21.7609 9.74613C21.7609 5.31958 19.3767 1.7312 16.4356 1.7312C14.4106 1.7312 12.6499 3.43267 11.7493 5.93731C10.8488 3.43267 9.08809 1.7312 7.06308 1.7312C4.12199 1.7312 1.73779 5.31958 1.73779 9.74613C1.73779 11.6504 2.18098 13.3972 2.918 14.7723L2.91617 14.7744L11.7493 31.2516L20.5824 14.7745L20.5806 14.7723C21.3177 13.3972 21.7609 11.6504 21.7609 9.74613Z" stroke="#212020" stroke-width="1.5" stroke-miterlimit="10" stroke-linejoin="round"/>
</svg>`;
            }
          });
        });
      }
      function addQuantityButtonsToCartItems() {
        const cartItems = document.querySelectorAll(
          ".cart-popup .product-item"
        );
        cartItems.forEach((item) => {
          const quantityInput = document.createElement("input");
          quantityInput.type = "number";
          quantityInput.value = 1; // Initial quantity
          quantityInput.min = 0;
          quantityInput.max = 99; // Adjust maximum quantity as needed

          const incrementButton = document.createElement("button");
          incrementButton.textContent = "+";

          const decrementButton = document.createElement("button");
          decrementButton.textContent = "-";

          item.appendChild(quantityInput);
          item.appendChild(incrementButton);
          item.appendChild(decrementButton);

          incrementButton.addEventListener("click", () => {
            const newQuantity = parseInt(quantityInput.value) + 1;
            quantityInput.value = newQuantity;
            updateCartTotals();
          });

          decrementButton.addEventListener("click", () => {
            const newQuantity = Math.max(0, parseInt(quantityInput.value) - 1);
            quantityInput.value = newQuantity;
            updateCartTotals();
          });
        });
      }
      function updateCartTotals() {
        const cartItems = document.querySelectorAll(
          ".cart-popup .product-item"
        );
        let totalPrice = 0;
        let totalProducts = 0;

        cartItems.forEach((item) => {
          const quantity = parseInt(
            item.querySelector('input[type="number"]').value
          );
          const productPrice = parseFloat(
            item.querySelector(".product-price").textContent.split("$")[1]
          );
          totalPrice += quantity * productPrice;
          totalProducts += quantity;
        });

        const totalsElement = document.querySelector(".cart-popup .totals");
        totalsElement.textContent = `Total Products: ${totalProducts} | Total Price: $${totalPrice.toFixed(
          2
        )}`;
      }
      function checkout() {
        alert("Product bought successfully!");

        // Reset cart state
        const cartCount = document.querySelector(".cart-count");
        cartCount.textContent = "0";
        const cartPopup = document.querySelector(".cart-popup");

        const cartPop = document.querySelector(".cart-pop");
        cartPopup.innerHTML = "";
        cartPopup.style.display = "none";
        totalPrice = 0;
        totalProducts = 0;
        cartPop.style.display = "none";
      }
      function loadContainer() {
        // Code to load the container
        // After the container is loaded, call the function to add event listeners to the "ADD TO CART" buttons
        addEventListenersToCartButtons();
      }

      // Call the loadContainer function after the DOM has been fully loaded
      document.addEventListener("DOMContentLoaded", function () {
        loadContainer();
      });
    </script>
  </body>
</html>
